import{_ as y,r as t,o as w,m as V,s as d,u as S,c as i,f as k,b as a,h as g,j as f,t as p,k as C,l as E,F as D,a as o}from"./index-FjAI4e_a.js";import{H as I}from"./Header-Dzbiwq-b.js";const N={class:"p-4 max-w-md mx-auto"},B={class:"mb-2"},R={key:0,class:"text-success mb-2"},F={key:1,class:"text-danger mb-2"},H=["disabled"],K={key:0},U={key:1},j={class:"mt-2"},q={__name:"VerificationSent",setup(A){const h=V(),c=S(),v=t(""),m=t(!1),n=t(""),r=t(0),l=t(!1);w(async()=>{try{const s=h.query.email;if(s)v.value=decodeURIComponent(s);else{const{data:e}=await d.auth.getSession();if(!e.session){c.push("/login");return}}}catch(s){console.error("Error checking session/email param:",s),c.push("/login")}});const b=async()=>{var s;n.value="",m.value=!1;try{const{data:e}=await d.auth.getSession(),u=(s=e.session)==null?void 0:s.user;if(!u){c.push("/login");return}const{error:_}=await d.auth.resend({type:"signup",email:u.email});if(_)throw _;m.value=!0,x()}catch(e){n.value=e.message||"Gagal mengirim ulang email verifikasi."}},x=()=>{r.value=60,l.value=!0;const s=setInterval(()=>{r.value--,r.value<=0&&(clearInterval(s),l.value=!1)},1e3)};return(s,e)=>{const u=E("router-link");return o(),i(D,null,[k(I,{title:"Verifikasi Email"}),a("div",N,[a("p",B,[e[0]||(e[0]=f(" Kami telah mengirimkan email verifikasi ke ")),a("strong",null,p(v.value),1),e[1]||(e[1]=f(". Silakan periksa inbox atau folder spam Anda. "))]),m.value?(o(),i("p",R," Email verifikasi berhasil dikirim ulang. ")):g("",!0),n.value?(o(),i("p",F,p(n.value),1)):g("",!0),a("div",null,[a("button",{onClick:b,disabled:l.value,class:"btn main-bg-col text-white w-full"},[l.value?(o(),i("span",K,p(r.value)+" detik",1)):(o(),i("span",U,"Kirim Ulang Email Verifikasi"))],8,H)]),a("div",j,[k(u,{to:"/login",class:"block mt-4 text-sm text-primary text-center"},{default:C(()=>e[2]||(e[2]=[f(" Sudah verifikasi? Login di sini ")])),_:1})])])],64)}}},M=y(q,[["__scopeId","data-v-d3cfe040"]]);export{M as default};
